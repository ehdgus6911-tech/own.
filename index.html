<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>OWN. 관리 티어리스트</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --bg: #05070b;
      --card: #0d121c;
      --accent: #6284ff;
      --accent-soft: #2a3b80;
      --text: #f5f5f7;
      --muted: #a3a7b5;
      --border: #1a2233;
      --danger: #ff6b81;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
      background: radial-gradient(circle at top, #111827 0, #05070b 55%);
      color: var(--text);
      -webkit-font-smoothing: antialiased;
    }

    .app {
      max-width: 820px;
      margin: 0 auto;
      padding: 16px 16px 40px;
    }

    header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 12px;
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .brand-mark {
      width: 32px;
      height: 32px;
      border-radius: 999px;
      border: 1px solid #ffffff22;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 15px;
      font-weight: 700;
      letter-spacing: 0.08em;
      background: radial-gradient(circle at 30% 0%, #94a3ff22, #020617);
    }

    .brand-text-main {
      font-weight: 600;
      letter-spacing: 0.18em;
      font-size: 12px;
      text-transform: uppercase;
    }

    .brand-text-sub {
      font-size: 11px;
      color: var(--muted);
    }

    .pill {
      font-size: 11px;
      padding: 4px 10px;
      border-radius: 999px;
      border: 1px solid #ffffff22;
      color: var(--muted);
    }

    .card {
      background: rgba(5, 7, 13, 0.92);
      border-radius: 18px;
      padding: 18px 16px;
      border: 1px solid var(--border);
      box-shadow: 0 18px 40px rgba(0, 0, 0, 0.55);
      backdrop-filter: blur(16px);
      margin-bottom: 16px;
    }

    .hero-title {
      font-size: 22px;
      font-weight: 600;
      line-height: 1.35;
      margin-bottom: 8px;
    }

    .hero-highlight {
      color: var(--accent);
    }

    .hero-sub {
      font-size: 13px;
      color: var(--muted);
      line-height: 1.6;
    }

    .hero-sub strong {
      color: #e5e7ff;
      font-weight: 500;
    }

    .badge-row {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-top: 10px;
    }

    .badge {
      font-size: 11px;
      padding: 5px 9px;
      border-radius: 999px;
      background: #020617;
      border: 1px solid #111827;
      color: var(--muted);
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }

    .badge-dot {
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: var(--accent);
    }

    .btn-primary {
      width: 100%;
      margin-top: 14px;
      padding: 13px 14px;
      border-radius: 999px;
      border: none;
      background: linear-gradient(135deg, var(--accent), #4f46e5);
      color: white;
      font-weight: 600;
      font-size: 14px;
      cursor: pointer;
    }

    .btn-primary:active {
      transform: translateY(1px);
      opacity: 0.9;
    }

    .btn-secondary {
      width: 100%;
      margin-top: 10px;
      padding: 11px 14px;
      border-radius: 999px;
      border: 1px solid var(--border);
      background: #020617;
      color: var(--muted);
      font-size: 12px;
      cursor: pointer;
    }

    .section-title {
      font-size: 16px;
      font-weight: 600;
      margin-bottom: 4px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .section-sub {
      font-size: 12px;
      color: var(--muted);
      margin-bottom: 8px;
    }

    details.category {
      margin-bottom: 10px;
      border-radius: 14px;
      border: 1px solid var(--border);
      background: #020617e6;
    }

    details[open].category {
      border-color: #374151;
      background: #020617f2;
    }

    summary {
      padding: 10px 12px;
      list-style: none;
      display: flex;
      justify-content: space-between;
      align-items: center;
      cursor: pointer;
    }

    summary::-webkit-details-marker {
      display: none;
    }

    .cat-label {
      font-size: 13px;
      font-weight: 500;
    }

    .cat-sub {
      font-size: 11px;
      color: var(--muted);
      margin-top: 2px;
    }

    .chevron {
      font-size: 12px;
      color: var(--muted);
    }

    .questions {
      padding: 4px 12px 10px;
      border-top: 1px solid var(--border);
    }

    .question {
      padding: 8px 0 6px;
      border-bottom: 1px dashed #111827;
    }

    .question:last-child {
      border-bottom: none;
    }

    .q-text {
      font-size: 12px;
      margin-bottom: 4px;
      line-height: 1.5;
    }

    .q-controls {
      display: flex;
      gap: 8px;
      font-size: 11px;
    }

    .chip {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 3px 8px;
      border-radius: 999px;
      border: 1px solid var(--border);
      font-size: 11px;
      color: var(--muted);
    }

    .qs-footer {
      margin-top: 6px;
      font-size: 11px;
      color: var(--muted);
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 6px;
    }

    .qs-footer span {
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }

    .dot-green {
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: #4ade80;
    }

    .dot-red {
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: #f97373;
    }

    .error {
      margin-top: 6px;
      font-size: 11px;
      color: var(--danger);
    }

    .result-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 10px;
    }

    .tier-tag {
      font-size: 11px;
      padding: 3px 8px;
      border-radius: 999px;
      border: 1px solid #ffffff22;
      background: #020617;
      display: inline-flex;
      align-items: center;
      gap: 4px;
      color: var(--muted);
    }

    .tier-main {
      font-size: 28px;
      font-weight: 700;
      letter-spacing: 0.12em;
    }

    .tier-main span {
      font-size: 12px;
      font-weight: 500;
      color: var(--muted);
      letter-spacing: 0;
      margin-left: 6px;
    }

    .tier-desc {
      font-size: 12px;
      color: var(--muted);
      line-height: 1.6;
      margin-bottom: 10px;
    }

    .tier-list {
      list-style: none;
      padding-left: 16px;
      margin: 0 0 4px;
      font-size: 11px;
      color: var(--muted);
    }

    .tier-list li {
      margin-bottom: 4px;
    }

    .table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 6px;
      font-size: 11px;
    }

    .table th,
    .table td {
      padding: 6px 4px;
      text-align: left;
      border-bottom: 1px solid #111827;
    }

    .table th {
      color: var(--muted);
      font-weight: 500;
      font-size: 11px;
    }

    .pill-small {
      padding: 2px 7px;
      border-radius: 999px;
      font-size: 10px;
      border: 1px solid #1f2937;
    }

    .pill-D { color: #fca5a5; border-color: #7f1d1d; }
    .pill-C { color: #facc15; border-color: #854d0e; }
    .pill-B { color: #a5b4fc; border-color: #3730a3; }
    .pill-A { color: #4ade80; border-color: #15803d; }
    .pill-S { color: #f97316; border-color: #c2410c; }

    footer {
      margin-top: 14px;
      font-size: 10px;
      color: #6b7280;
      text-align: center;
    }

    @media (min-width: 768px) {
      .hero-title {
        font-size: 24px;
      }
      .card {
        padding: 20px 18px;
      }
    }
  </style>
</head>
<body>
<div class="app">
  <header>
    <div class="brand">
      <div class="brand-mark">O.</div>
      <div>
        <div class="brand-text-main">OWN</div>
        <div class="brand-text-sub">OWN YOUR OWN ATTRACTIVENESS</div>
      </div>
    </div>
    <div class="pill">관리 티어리스트 v1.0</div>
  </header>

  <!-- 인트로 카드 -->
  <section class="card">
    <div class="hero-title">
      나를 기준으로 관리하는<br />
      <span class="hero-highlight">OWN. 관리 티어리스트</span>
    </div>
    <p class="hero-sub">
      지금 나는 <strong>어느 정도 수준의 관리</strong>를 하고 있을까?<br />
      피부 · 헤어 · 패션 · 향 · 운동 · 디테일 6가지를 기준으로<br />
      <strong>D ~ S 티어</strong>까지 한 번에 진단해 줍니다.
    </p>
    <div class="badge-row">
      <span class="badge"><span class="badge-dot"></span> 60문항 · 3분 이내</span>
      <span class="badge">YES / NO만 선택하면 끝</span>
      <span class="badge">남성 자기관리 전용</span>
    </div>
    <button class="btn-primary" id="startBtn">진단 시작하기</button>
    <button class="btn-secondary" id="scrollToResultBtn">이전 결과 영역으로 이동</button>
  </section>

  <!-- 질문 카드 -->
  <section class="card">
    <div class="section-title">
      <span>질문 60개</span>
      <span style="font-size:11px;color:var(--muted);">YES = 1점, NO = 0점</span>
    </div>
    <p class="section-sub">
      최대한 <strong>솔직하게</strong> 체크할수록, 진단 결과가 더 정확해집니다.<br />
      (모든 문항은 익명 · 저장되지 않음)
    </p>

    <div id="question-container"></div>

    <div class="qs-footer">
      <span><span class="dot-green"></span> YES = 지금 이미 하고 있는 관리</span>
      <span><span class="dot-red"></span> NO = 앞으로 채워 넣을 관리</span>
    </div>
    <div id="errorBox" class="error" style="display:none;"></div>

    <button class="btn-primary" id="submitBtn">내 관리 티어 보기</button>
  </section>

  <!-- 결과 카드 -->
  <section class="card" id="resultCard" style="display:none;">
    <div class="result-header">
      <div>
        <div class="tier-main" id="overallTier">B <span id="overallLabel">기초 루틴 정착</span></div>
        <div class="tier-tag" id="overallScoreText">총 점수 0 / 60</div>
      </div>
      <div class="tier-tag">
        <span style="width:6px;height:6px;border-radius:999px;background:#4ade80;"></span>
        나만 보는 결과
      </div>
    </div>

    <p class="tier-desc" id="overallDesc"></p>
    <ul class="tier-list" id="overallTips"></ul>

    <hr style="border:0;border-top:1px solid #111827;margin:10px 0 8px;" />

    <div class="section-title">
      <span>영역별 관리 티어</span>
      <span style="font-size:11px;color:var(--muted);">어디서 점수를 더 올릴지 확인해보세요.</span>
    </div>

    <table class="table" id="categoryTable">
      <thead>
      <tr>
        <th>영역</th>
        <th>점수</th>
        <th>티어</th>
        <th>요약</th>
      </tr>
      </thead>
      <tbody></tbody>
    </table>
  </section>

  <footer>
    OWN. &nbsp;|&nbsp; 당신만의 매력을 찾고, 소유하세요.
  </footer>
</div>

<script>
  // ----------------------------
  // 데이터 정의
  // ----------------------------

  const categories = [
    {
      id: 'skin',
      name: '피부',
      subtitle: '세안 · 보습 · 선크림 · 피부 이해',
      questions: [
        '나는 규칙적인 세안을 한다. (아침 / 저녁)',
        '나는 세안할 때 비누가 아니라, 폼클렌징 또는 오일클렌징을 사용한다.',
        '나는 세안 후 기본 보습 제품(토너·로션·크림)을 하루 한 번 이상 반드시 바른다.',
        '나는 자외선 차단제(선크림)를 외출 시 꼭 발라야 한다는 사실을 알고 있고 실제로 그렇게 한다.',
        '나는 내 피부타입(건성·지성·복합성)을 정확히 알고, 그에 맞는 제품(클렌징·스킨케어 등)을 꾸준히 사용한다.',
        '나는 각질·진정·보습 관리를 주기적으로 하며 피부 컨디션을 일정하게 유지한다, 또는 유지하려고 노력한다.',
        '나는 내 피부 톤(쿨/웜 + 파운데이션 호수)을 알고 있으며, 필요하면 톤업·쿠션 등 기본 커버 제품을 자연스럽게 사용할 수 있다.',
        '나는 계절 변화, 시술 후, 트러블 발생 등 상황에 따라 사용하는 제품을 바꾸거나 홈케어 루틴을 조절할 수 있다.',
        '나는 화장품 성분(레티놀·나이아신아마이드·히알루론산·판테놀 등)과 효과를 어느 정도 알고, 내 피부 문제에 맞는 화장품을 선택해서 사용한다.',
        '나는 필요할 때 피부과 시술·관리를 정기적 또는 주기적으로 받고 있다.'
      ]
    },
    {
      id: 'hair',
      name: '헤어',
      subtitle: '미용실 방문 · 시술 · 스타일링 · 미용사 선택',
      questions: [
        '나는 한 달에 한 번 이상 미용실에서 머리를 정리(컷트)한다.',
        '나는 동네 아무 미용실이 아닌, 내가 선호하는 단골 미용실 / 주로 가는 곳이 있다.',
        '나는 다운펌·볼륨펌·매직 등 컷트 외 시술을 한 번 이상 받아본 적이 있다.',
        '나는 내 모질(직모·곱슬·반곱슬), 두상, 이마 라인의 특징을 어느 정도 알고 있다.',
        '나는 나에게 가장 잘 맞는 대표 헤어스타일 1가지를 확신하며 꾸준히 유지해본 적이 있다.',
        '나는 탈모 관리(약·두피 제품 등)를 하고 있거나, 탈모가 아니더라도 모발·두피 건강을 위해 꾸준히 관리하고 있다.',
        '나는 손·롤빗·고데기 등을 이용해 기본 스타일링이 가능하며, 컬크림·토닉·스프레이 등 헤어 제품으로 일정한 퀄리티를 유지할 수 있다.',
        '나는 뜨는 부위·눌리는 부위·볼륨이 필요한 구역을 알고 있으며, 스타일링 시 이를 의도적으로 조절해 다양한 스타일을 연출할 수 있다.',
        '나는 미용사를 기준으로 미용실을 선택하며, 나뿐 아니라 소개받은 사람도 망하지 않을 정도로 “미용사 보는 눈”이 있다.',
        '나는 “머리 어디서 했어?”, “머리 스타일 잘한다”, “미용실 추천해줘”라는 말을 들어본 적이 있다.'
      ]
    },
    {
      id: 'style',
      name: '패션',
      subtitle: '상황 맞는 옷 · 핏 · 기본템 · 스타일 정체성',
      questions: [
        '나는 외출할 때 상황(출근·약속·데이트 등)에 맞춰 옷을 최소한 다르게 고른다.',
        '나는 내 신체 단점(어깨, 기장, 비율 등)을 보완해주는 핏을 알고 있다.',
        '나는 외출 전 전신거울로 핏, 구김, 전체 실루엣을 반드시 체크한다.',
        '나는 내 신체 사이즈(어깨·가슴·허리·기장)를 cm 단위로 대략 알고 있다.',
        '나는 옷장에 기본템 상·하의 각각 최소 3개 이상 갖추고 있다.',
        '나는 상·하의 색 조합(톤온톤, 대비)이나 소재 매치를 고려해 코디한다.',
        '나는 기존 옷만으로도 다양한 무드의 스타일을 연출할 수 있다. (미니멀 / 캐주얼 / 깔끔한 데일리 등)',
        '나는 시계 외에 반지·팔찌·목걸이·안경 등 액세서리를 활용해 룩의 완성도를 높인다.',
        '나는 주변에서 “옷 잘 입는다”, “어디서 샀냐”는 질문을 받아본 적이 있다.',
        '나는 유행을 과하게 따라가지 않고, 내 스타일(미니멀·클래식·스트릿 등)이 명확히 확립되어 있다.'
      ]
    },
    {
      id: 'scent',
      name: '향',
      subtitle: '냄새 관리 · 향수 · 공간 향 · 이미지와의 매치',
      questions: [
        '나는 겨드랑이·발·사타구니·귀 뒤 등 냄새가 나는 부위를 신경 써서 씻는다.',
        '나는 빨래에서 쿰쿰한 냄새가 나지 않도록 섬유유연제·건조기·환기 등으로 관리한다.',
        '나는 외출 시 향수·바디미스트·섬유향수 등 발향 제품을 사용한다.',
        '나는 향을 뿌리기 전 탈취(땀 냄새, 담배 냄새 등 악취 제거)를 해야 한다는 것을 알고 있으며 탈취제를 사용한다.',
        '나는 나의 선호 향 계열(시트러스/우디/머스크/바닐라 등)을 알고 있다.',
        '나는 향의 농도, 계절, 상황에 따라 제품을 다르게 쓴다.',
        '나는 향 지속력 원리(보습 → 뿌리는 위치 → 잔향 구조)를 이해하고 적용한다.',
        '나는 내 방·옷장·차 등 생활 공간 향 관리(디퓨저·사쉐·룸스프레이)를 하고 있다.',
        '나는 향을 선택할 때 개인 취향뿐 아니라 나의 무드·이미지·스타일과의 조화까지 고려한다.',
        '나는 “향 좋다”, “향 뭐 써요?”라는 질문을 받은 적이 있다.'
      ]
    },
    {
      id: 'fitness',
      name: '운동',
      subtitle: '활동량 · 루틴 · 체형 · 식단',
      questions: [
        '나는 하루 2,000보(20~30분) 이상 걷는 날이 자주 있다.',
        '나는 일주일에 최소 한 번, 땀이 날 정도의 운동을 한다.',
        '나는 내 몸무게·골격근량·체지방률과 같은 기초 수치를 알고 있다.',
        '나는 체지방 감소·근육 증가 등 명확한 목표로 운동 루틴을 만든 경험이 있다.',
        '나는 최소 4주 이상, 주 1~2회 운동 루틴을 유지해본 적이 있다.',
        '나는 주 3회 이상(1시간 이상) 땀 흘리는 운동을 꾸준히 한다.',
        '나는 신체 부위별 대표 운동과 기본적인 운동 원리를 알고 있다.',
        '나는 근육이 잡힌 탄탄한 체형을 유지하고 있다. (복부 포함)',
        '나는 주 5회 이상 루틴과 식단을 스스로 설계·관리하며 꾸준히 실천하고 있다.',
        '나는 주변에서 “몸 좋아졌다”, “체형 달라졌다”, “건강해 보인다”는 말을 들어본 적이 있다.'
      ]
    },
    {
      id: 'detail',
      name: '디테일',
      subtitle: '손·발·수염·눈썹·위생 · 소지품',
      questions: [
        '나는 주 1회 손톱·발톱을 깔끔하게 정리한다.',
        '나는 수건·양말·속옷을 하루 단위로 깨끗하게 교체한다.',
        '나는 콧털이 보이지 않도록 정기적으로 정리한다.',
        '나는 핸드크림·풋케어·립밤 등을 사용해 손·발·입술을 꾸준히 관리한다.',
        '나는 꾸준히 면도하고, 수염 자국이 남지 않도록 관리하며 필요 시 레이저 제모도 고려하거나 하고 있다.',
        '나는 눈썹 칼·가위·족집게를 사용해 눈썹을 깔끔하게 정돈할 수 있다.',
        '나는 괄사 또는 마사지로 얼굴 붓기를 빼고 얼굴 라인을 관리한다.',
        '나는 휴대폰·에어팟·시계·차키 등 개인 휴대물품을 주 1회 알코올로 소독한다.',
        '나는 베개커버·수건·속옷 등 냄새·세균이 쉽게 쌓이는 품목을 정기적인 주기로 교체한다.',
        '나는 내 라이프스타일에 필요한 영양제를 꾸준히 섭취한다.'
      ]
    }
  ];

  const tierMeta = {
    D: {
      label: '관리 미진입',
      desc: '관리의 필요성은 느끼지만, 아직 루틴이 거의 잡혀 있지 않은 단계입니다. 지금은 “잘하려고” 하기보다, 아주 작은 루틴 하나만 만들면 됩니다.',
      tips: [
        '피부: 세안-보습-선크림 3가지부터 매일 해보기',
        '헤어: 한 달 1회 미용실 방문 고정',
        '운동: 일주일에 1번이라도 땀 나는 활동 추가'
      ]
    },
    C: {
      label: '입문자',
      desc: '기본 개념은 알고, 가끔씩 관리를 시도하지만 아직 “꾸준함”이 부족한 단계입니다. 여기서 한두 가지만 루틴으로 만들면 B 티어는 금방입니다.',
      tips: [
        '한 가지 카테고리(피부/헤어 등)를 골라 루틴화하기',
        '유행보다 “나와 맞는 것” 하나 찾는 데 집중하기',
        '주 1~2회만이라도 운동/셀프케어 고정하기'
      ]
    },
    B: {
      label: '기초 루틴 정착',
      desc: '기본적인 관리 루틴이 자리 잡기 시작한 단계입니다. 이미 평균 이상이고, 이제부터는 디테일과 완성도를 올리는 구간입니다.',
      tips: [
        '각 카테고리에서 하나씩 “디테일 습관” 추가하기',
        '나에게 잘 맞는 헤어/스타일을 더 명확히 정의해보기',
        '운동과 식단을 세트로 묶어서 관리해보기'
      ]
    },
    A: {
      label: '중상위 관리자',
      desc: '대부분의 루틴이 안정적이고, 본인만의 기준도 있는 단계입니다. 이제는 “정체성”과 “일관성”을 통해 S 티어로 올라갈 수 있습니다.',
      tips: [
        '피부·헤어·패션·향을 하나의 무드로 통일해 보기',
        '전문가(피부과, 트레이너, 미용사)를 적극 활용',
        '관리 경험을 기록해서 나만의 공식을 만들기'
      ]
    },
    S: {
      label: '하이엔드 관리층',
      desc: '컨셉·디테일·꾸준함이 모두 갖춰진 상위 1% 관리 수준입니다. 이제부터는 “나만의 브랜드”를 만든다는 마음으로 방향성을 유지하는 것이 중요합니다.',
      tips: [
        '계절별/상황별 룩과 향을 룩북처럼 정리하기',
        '주변 사람들의 관리까지 도와주는 역할 해보기',
        '장기적인 건강(수면, 혈액검사 등)까지 함께 관리하기'
      ]
    }
  };

  // 점수 → 티어
  function scoreToTier(score, max) {
    const ratio = (score / max) * 100;
    if (ratio <= 20) return 'D';
    if (ratio <= 40) return 'C';
    if (ratio <= 65) return 'B';
    if (ratio <= 85) return 'A';
    return 'S';
  }

  // ----------------------------
  // 질문 DOM 생성
  // ----------------------------

  const container = document.getElementById('question-container');

  categories.forEach(cat => {
    const details = document.createElement('details');
    details.className = 'category';
    if (cat.id === 'skin') details.open = true;

    const summary = document.createElement('summary');
    const left = document.createElement('div');
    const label = document.createElement('div');
    label.className = 'cat-label';
    label.textContent = cat.name;
    const sub = document.createElement('div');
    sub.className = 'cat-sub';
    sub.textContent = cat.subtitle;
    left.appendChild(label);
    left.appendChild(sub);

    const chev = document.createElement('div');
    chev.className = 'chevron';
    chev.textContent = '열기';

    summary.appendChild(left);
    summary.appendChild(chev);

    details.appendChild(summary);

    const qWrap = document.createElement('div');
    qWrap.className = 'questions';

    cat.questions.forEach((qText, idx) => {
      const qDiv = document.createElement('div');
      qDiv.className = 'question';

      const p = document.createElement('p');
      p.className = 'q-text';
      p.textContent = `${idx + 1}. ${qText}`;
      qDiv.appendChild(p);

      const controls = document.createElement('div');
      controls.className = 'q-controls';

      const name = `${cat.id}_${idx}`;

      ['yes', 'no'].forEach(value => {
        const label = document.createElement('label');
        label.className = 'chip';
        const input = document.createElement('input');
        input.type = 'radio';
        input.name = name;
        input.value = value;
        input.style.accentColor = '#4f46e5';
        input.style.transform = 'scale(1.05)';
        label.appendChild(input);
        label.appendChild(document.createTextNode(value === 'yes' ? 'YES' : 'NO'));
        controls.appendChild(label);
      });

      qDiv.appendChild(controls);
      qWrap.appendChild(qDiv);
    });

    details.appendChild(qWrap);
    container.appendChild(details);
  });

  // ----------------------------
  // 이벤트 & 결과 계산
  // ----------------------------

  const errorBox = document.getElementById('errorBox');
  const resultCard = document.getElementById('resultCard');
  const overallTierEl = document.getElementById('overallTier');
  const overallLabelEl = document.getElementById('overallLabel');
  const overallScoreText = document.getElementById('overallScoreText');
  const overallDesc = document.getElementById('overallDesc');
  const overallTips = document.getElementById('overallTips');
  const categoryTableBody = document.querySelector('#categoryTable tbody');

  document.getElementById('submitBtn').addEventListener('click', () => {
    errorBox.style.display = 'none';
    errorBox.textContent = '';

    const totalQuestions = categories.reduce((sum, c) => sum + c.questions.length, 0);
    let totalYes = 0;
    const categoryResults = [];

    for (const cat of categories) {
      let yesCount = 0;
      const qCount = cat.questions.length;

      for (let i = 0; i < qCount; i++) {
        const name = `${cat.id}_${i}`;
        const checked = document.querySelector(`input[name="${name}"]:checked`);
        if (!checked) {
          errorBox.style.display = 'block';
          errorBox.textContent = `아직 체크하지 않은 문항이 있어요. [${cat.name}] 영역을 다시 확인해 주세요.`;
          // 해당 카테고리를 열어준다
          const det = [...document.querySelectorAll('details.category')].find(d => d.querySelector('.cat-label').textContent === cat.name);
          if (det) det.open = true;
          det?.scrollIntoView({ behavior: 'smooth', block: 'start' });
          return;
        }
        if (checked.value === 'yes') yesCount++;
      }

      totalYes += yesCount;
      const tier = scoreToTier(yesCount, qCount);
      categoryResults.push({ cat, yesCount, qCount, tier });
    }

    const overallTier = scoreToTier(totalYes, totalQuestions);
    const meta = tierMeta[overallTier];

    // 전체 결과 표시
    overallTierEl.textContent = overallTier;
    const span = document.createElement('span');
    span.id = 'overallLabel';
    span.textContent = meta.label;
    overallTierEl.appendChild(span);

    overallScoreText.textContent = `총 점수 ${totalYes} / ${totalQuestions}`;
    overallDesc.textContent = meta.desc;

    overallTips.innerHTML = '';
    meta.tips.forEach(t => {
      const li = document.createElement('li');
      li.textContent = t;
      overallTips.appendChild(li);
    });

    // 카테고리 테이블
    categoryTableBody.innerHTML = '';
    categoryResults.forEach(({ cat, yesCount, qCount, tier }) => {
      const tr = document.createElement('tr');

      const tdName = document.createElement('td');
      tdName.textContent = cat.name;

      const tdScore = document.createElement('td');
      tdScore.textContent = `${yesCount} / ${qCount}`;

      const tdTier = document.createElement('td');
      const pill = document.createElement('span');
      pill.className = `pill-small pill-${tier}`;
      pill.textContent = tier;
      tdTier.appendChild(pill);

      const tdSummary = document.createElement('td');
      tdSummary.textContent = tierMeta[tier].label;

      tr.appendChild(tdName);
      tr.appendChild(tdScore);
      tr.appendChild(tdTier);
      tr.appendChild(tdSummary);

      categoryTableBody.appendChild(tr);
    });

    resultCard.style.display = 'block';
    resultCard.scrollIntoView({ behavior: 'smooth', block: 'start' });
  });

  document.getElementById('startBtn').addEventListener('click', () => {
    container.scrollIntoView({ behavior: 'smooth', block: 'start' });
  });

  document.getElementById('scrollToResultBtn').addEventListener('click', () => {
    resultCard.scrollIntoView({ behavior: 'smooth', block: 'start' });
  });
</script>
</body>
</html>
